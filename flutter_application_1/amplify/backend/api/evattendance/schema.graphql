enum AssignmentStatus { ASSIGNED IN_PROGRESS DONE }

type Assignment
  @model
  @auth(rules: [
    { allow: groups, groups: ["owners"], operations: [create, read, update, delete] },
    { allow: owner, ownerField: "teacherUsername", operations: [create, read, update, delete] },
    { allow: owner, ownerField: "studentUsername", operations: [read, update] }
  ])
{
  id: ID!
  title: String!
  description: String
  status: AssignmentStatus!

  teacherUsername: String!
    @index(name: "byTeacherV3", queryField: "assignmentsByTeacherV3", sortKeyFields: ["dueDate"])

  studentUsername: String!
    @index(name: "byStudentV3", queryField: "assignmentsByStudentV3", sortKeyFields: ["dueDate"])

  book: String
  range: String
  dueDate: AWSDateTime
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Student
  @model
  @auth(rules: [
    { allow: groups, groups: ["owners"], operations: [create, read, update, delete] },
    { allow: owner, ownerField: "username", operations: [read, update] },
    { allow: groups, groups: ["teachers"], operations: [read] }
  ])
{
  id: ID!
  username: String!
    @index(name: "byStudentUsernameV3", queryField: "getStudentByUsernameV3")
  name: String!
  grade: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Teacher
  @model
  @auth(rules: [
    { allow: groups, groups: ["owners"], operations: [create, read, update, delete] },
    { allow: owner, ownerField: "username", operations: [read, update] },
    { allow: groups, groups: ["teachers"], operations: [read] }
  ])
{
  id: ID!
  username: String!
    @index(name: "byTeacherUsernameV3", queryField: "getTeacherByUsernameV3")
  name: String!
  subjects: [String]
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
