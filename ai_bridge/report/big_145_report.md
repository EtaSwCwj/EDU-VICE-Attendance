# BIG_145: Korean OCR 모델 적용 후 인식 오류 분석 보고서

## 작업 일시
- 2026년 1월 4일

## 작업 목표
Korean 모델 적용 후 발생한 OCR 인식 오류 원인 파악

## 오해의 정정

### 기존 인식 (잘못된 것)
- Page 9 → Page 0으로 변경
- A/B/C/D 섹션 중 D만 인식
- 내용이 완전히 다름

### 실제 상황 (올바른 것)
- Korean 모델은 영어를 정상적으로 인식함
- 열 분리 후 특정 열(col2)만 처리되어 UNIT 04만 나타남
- Page 번호는 AI 파싱 단계에서 해석된 것

## 분석 결과

### 1. Latin 모델 (이전)
```
- OCR 전체 길이: 1824자
- 시작: "CHAPTER 1. UNIT 04 5 Practice UNIT 01 RA"
- 포함: UNIT 01, 02, 03, 04 모두
- 영어: ✅ 정상 인식
- 한글: ❌ 깨짐 (목적어→0, 동사→D)
```

### 2. Korean 모델 (현재)
```
열 분리 후:
- col1 (왼쪽): 794자, UNIT 01-03
- col2 (오른쪽): 988자, UNIT 04

재귀 분리 적용:
- L/R (Left/Right) 구분
- d0/d1/d2 (재귀 깊이)
- 복잡한 분할 구조
```

### 3. 한글 인식 문제
- Korean 모델에서도 한글이 깨짐
- 예: "7 484 R'gve+ZI0+E 384|"
- ML Kit Korean 모델이 제대로 로드되지 않은 것으로 추정

## 진짜 문제

1. **Korean 모델 로딩 실패**
   - `com.google.mlkit:text-recognition-korean:16.0.0` 추가했지만
   - 실제로는 Latin 모델이 계속 사용되는 것으로 보임
   - 한글이 여전히 깨져서 인식됨

2. **열 분리 로직 변경**
   - 단순 col1/col2에서 재귀 분리로 변경됨
   - L/R, d0/d1/d2 등 복잡한 구조
   - 일부 열만 처리되어 불완전한 결과

## 해결 방안

### 즉시 적용 가능
1. Latin 모델로 롤백 + 영어만 인식
2. 한글은 Claude Vision API로 처리

### 추가 확인 필요
1. Korean 모델이 실제로 로드되는지 확인
   - TextRecognizer 초기화 로그 확인
   - 모델 다운로드 상태 확인

2. 열 분리 로직 검토
   - 재귀 분리 후 모든 열이 처리되는지 확인
   - 파일명 규칙과 처리 순서 검증

### 장기 해결책
1. ML Kit Korean 모델 대신 다른 한글 OCR 솔루션 검토
2. 하이브리드 접근: 숫자/영문은 ML Kit, 한글은 별도 처리

## 검증된 사실
- ✅ Korean 모델도 영어는 정상 인식
- ✅ 열 분리는 정상 작동 (2개 열 감지)
- ❌ 한글은 여전히 인식 실패
- ❌ 재귀 분리 후 일부만 처리되는 문제

## 결론
"Page 0, D섹션만" 문제는 Korean 모델 때문이 아니라 열 분리 후 처리 로직의 문제였습니다. Korean 모델은 영어를 정상적으로 인식하지만, 한글 인식은 여전히 실패하고 있어 실제로는 Latin 모델이 사용되고 있을 가능성이 높습니다.