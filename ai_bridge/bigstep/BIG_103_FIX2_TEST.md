# BIG_103_FIX2: 페이지 목록/범위 검증 테스트

> 생성일: 2024-12-28
> 목표: 등록 페이지 목록 표시, 범위 초과 검증, 초기화 기능 테스트

---

## ⚠️ 작성 전 체크리스트

### 기본 확인
- [x] 로컬 코드 수정 완료 (Desktop Opus가 직접 수정함)
- [x] 수정 파일: book_detail_page.dart, answer_camera_page.dart

### 테스트 환경
- [ ] 빌드 필요: ✅ (UI 확인 필요)
- [ ] 듀얼 빌드: ❌ (1개 계정으로 충분)

### 플로우 확인
- [x] 진입 경로: 내 책 → 책 상세 → 등록 페이지 목록 / 정답지 등록

---

## ⚠️ 필수: Opus는 직접 작업 금지!

```bash
claude --model claude-sonnet-4-20250514 --dangerously-skip-permissions -p "작업 내용"
```

---

## ⚠️ 컨텍스트 관리 (필수!)

```
1. 스몰스텝 2~3개 완료할 때마다 로그 저장
2. 로그 저장 후 /compact 실행 → 확인 묻지 말고 바로 다음 작업
3. 파일 생성은 Sonnet한테 1개씩 시키기 (한 번에 여러 파일 X)
```

---

## 환경

- 프로젝트: C:\gitproject\EDU-VICE-Attendance
- Flutter 앱: flutter_application_1/
- 폰 디바이스: RFCY40MNBLL
- 테스트 계정: maknae12@gmail.com

---

## 🎯 기대 결과 & 테스트 시나리오

### 기대 결과
- 책 상세에서 "등록된 정답지 페이지" 목록 확인 가능
- 범위 초과 페이지는 빨간색으로 표시
- 정답지 등록 시 범위 초과하면 경고 다이얼로그
- 등록 페이지 초기화 가능

---

### CP 테스트 시나리오

**사전 조건:**
- 책이 최소 1개 등록되어 있어야 함
- 테스트용으로 총 페이지 수를 작게 설정한 책 준비 (예: 20페이지)

---

**테스트 1: 등록 페이지 목록 표시**
```
1. 내 책 목록 → 책 선택 → 상세 페이지
2. "등록된 정답지 페이지 (X개)" 섹션 확인
3. 클릭하면 목록 펼쳐짐
4. 각 페이지가 태그 형태로 표시 (p.1, p.2, ...)
```

**테스트 2: 범위 초과 페이지 경고 표시**
```
사전: 책의 totalPages가 20인데, 50페이지가 등록되어 있는 경우

1. 책 상세 → 등록 페이지 목록 펼치기
2. 범위 초과 페이지(예: p.50)가 빨간색 태그로 표시
3. 하단에 주황색 경고 박스:
   "일부 페이지가 책의 총 페이지(20)를 초과합니다"
```

**테스트 3: 정답지 등록 시 범위 검증**
```
사전: 책의 totalPages를 작게 설정 (예: 10페이지)

1. "정답지 등록" 클릭
2. PDF 업로드 또는 카메라 촬영
3. 인식된 페이지가 totalPages 초과하면:
   → 경고 다이얼로그 표시
   → "초과 페이지: 15p, 20p" 표시
   → "취소" 또는 "저장" 선택 가능
4. "저장" 선택 시 저장 진행
5. "취소" 선택 시 저장 안 됨
```

**테스트 4: 등록 페이지 초기화**
```
1. 책 상세 → 우측 상단 메뉴 (⋮)
2. "등록 페이지 초기화" 선택
3. 확인 다이얼로그 표시
4. "초기화" 클릭 → 모든 등록 페이지 삭제
5. 페이지 맵이 전부 회색으로 변경
6. 등록 페이지 목록이 비어있음
```

**테스트 5: 기존 페이지와 합치기**
```
사전: 이미 p.1, p.2, p.3 등록된 상태

1. "정답지 등록" → PDF 업로드
2. 새로 p.5, p.6 인식됨
3. 저장 완료 시:
   → "2페이지 등록 완료 (총 5페이지)" 스낵바
4. 상세로 돌아오면 p.1~p.3, p.5, p.6 모두 등록됨
```

---

## 스몰스텝

### 1. flutter analyze

- [ ] Sonnet 지시:
```
cd C:\gitproject\EDU-VICE-Attendance\flutter_application_1
flutter analyze 실행하고 결과 알려줘
```
- [ ] 에러 0개 확인
- [ ] 완료 후 로그 저장: `ai_bridge/logs/big_103_fix2_step_01.log`

### 2. 폰 빌드

- [ ] Sonnet 지시:
```
cd C:\gitproject\EDU-VICE-Attendance\flutter_application_1
flutter run -d RFCY40MNBLL 실행해줘
빌드 완료되면 "빌드 완료" 알려줘
```
- [ ] 빌드 성공 확인
- [ ] 완료 후 로그 저장: `ai_bridge/logs/big_103_fix2_step_02.log`
- [ ] `/compact` 실행 후 바로 다음 진행

### 3. CP 테스트 대기

- [ ] CP에게 테스트 시나리오 안내
- [ ] 로그 모니터링하면서 대기
- [ ] CP 피드백 수집

### 4. CP "테스트 종료" 대기

- [ ] CP가 "테스트 종료" 입력 시 보고서 작성
- [ ] 보고서 파일: `ai_bridge/report/big_103_fix2_report.md`

---

## 검증 규칙 (v7.3)

- 에러 메시지만 보고 실패 판정 금지
- 실제 화면/동작 확인 후 판정

---

## 로그 저장

각 스몰스텝 완료 시:
- ai_bridge/logs/big_103_fix2_step_XX.log

---

## 완료 조건

1. flutter analyze 에러 0개
2. 테스트 1~5 통과 (CP 확인)
3. CP가 "테스트 종료" 입력
4. 보고서 작성 완료 (ai_bridge/report/big_103_fix2_report.md)
