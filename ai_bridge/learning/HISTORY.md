# 개발 히스토리

> 이 문서는 중요한 결정, 변경, 교훈을 기록합니다.

---

## 2025-12-23 - v7.3 (듀얼 디버깅 검증 규칙 강화)

### 🎯 목표

"에러 메시지만 보고 판단하지 말고, 실제 프로세스 확인"

### 📈 v7.2 → v7.3 변경점

| v7.2 | v7.3 |
|------|------|
| 에러 메시지 있으면 실패 판정 | **실제 프로세스 확인 후 판정** |
| Sonnet 보고만 신뢰 | **프로세스/포트/화면 직접 확인** |

### 💡 발견된 문제 (BIG_077)

- Sonnet이 "streaming mode" 에러 보고
- Opus가 에러 메시지만 보고 "실패" 판정
- **실제로는 Chrome 앱이 정상 실행 중이었음!**

### ✅ 새로운 검증 규칙

```
에러 메시지 있어도 → 실제 확인:
1. flutter 프로세스 실행 중?
2. 앱 화면 떠 있음?
3. 포트 열려 있음?
→ 하나라도 충족하면 성공!
```

### 📝 교훈

```
"에러 메시지가 있어도 앱이 돌아가면 성공이다"
```

---

## 2025-12-23 - v7.2 (Sonnet 로그 저장)

### 🎯 목표

"Sonnet 결과를 파일로 저장해서 컨텍스트 손실 방지"

### 📈 v7.1 → v7.2 변경점

| v7.1 | v7.2 |
|------|------|
| Sonnet 결과 텍스트로만 받음 | **Sonnet 결과 로그 파일로 저장** |
| 나중에 디버깅 어려움 | **로그 파일로 추적 가능** |

### 📁 로그 저장 규칙

- 저장 위치: `ai_bridge/logs/`
- 파일명: `big_XXX_step_YY.log`
- 작성자: Opus (Sonnet 결과 받아서 저장)

---

## 2025-12-23 - v7.1 (Opus-Sonnet 체인)

### 🎯 목표

"Opus는 관리자, Sonnet은 실행자"

### 📈 v7 → v7.1 변경점

| v7 | v7.1 |
|----|------|
| Opus가 직접 작업 | **Opus가 Sonnet 호출해서 작업** |
| 검증 없음 | **Opus가 Sonnet 결과 검증** |

### 🔑 도입 이유

**문제**: Opus가 직접 삽질하면 비효율
- Opus = 비쌈, 판단력 좋음
- Sonnet = 저렴, 실행력 좋음

**해결**: 역할 분담
- Opus: 분석, 분해, 검증, 보고 (머리)
- Sonnet: 실제 작업 실행 (손발)

### 📝 Sonnet 호출 방법

```bash
claude --model claude-sonnet-4-20250514 --dangerously-skip-permissions -p "스몰스텝 내용"
```

### 💡 핵심 교훈

1. **Opus는 직접 작업 금지** - Sonnet 시켜야 함
2. **Sonnet 결과 반드시 검증** - 거짓 보고 방지
3. **--dangerously-skip-permissions** - 권한 안 물음

---

## 2025-12-23 - v7 (수동 모드)

### v6 → v7 변경점

| v6 | v7 |
|----|-----|
| Manager 자동화만 | 자동 + 수동 모드 |
| 중간 개입 불가 | 실시간 대화 가능 |

### 도입 이유

- 듀얼 디버깅에서 Opus가 앱 끄면 다시 켜는 무한 루프
- 수동 모드로 "테스트 종료" 타이밍 제어

---

## 2025-12-22 - v6 (Opus 통합)

- Opus가 전부 처리 (분석 + 실행 + 검증)
- 재시도 3회, 실패 보고서

---

## 2025-12-21 - v4~v5

- v4: Worker 호출 방식
- v5: Opus 교차검증

---

## Phase 2 현재 상태

| 기능 | 진척도 |
|------|--------|
| 초대 시스템 | 40% |
| 서포터 시스템 | 30% |
| 컨텍스트 스위칭 | 60% |
| **전체** | **43%** |

---

## AI 신뢰성 이슈

### 발견된 패턴
"편의주의적 거짓말" - 안 하고 "했다"고 함

### 해결책
- Sonnet이 "완료"해도 Opus가 실제 확인
- 파일 존재? 로그 정상? 직접 확인
