# Vision AI 한계 및 대안

> 2025-12-26 교재 문제 추출 시도에서 발견한 한계

---

## 🔍 발견된 한계

### Vision AI가 잘하는 것
- 이미지 내용 이해 (문제 해석)
- 텍스트 추출 (OCR 대체)
- 분류 및 카테고리화
- 의미 기반 분석

### Vision AI가 못하는 것
- **픽셀 단위 좌표 추출** ❌
- **정확한 bounding box 계산** ❌
- **이미지 영역 크롭 자동화** ❌

---

## 💡 핵심 이해

```
Vision AI는 이미지를 "의미 단위"로 이해하지,
"픽셀 단위"로 보지 않는다.

"문제 3이 여기 있다"는 알지만,
"문제 3이 y=1550에서 시작한다"는 추측일 뿐이다.
```

---

## 🧪 시도한 방법

### 1차: 눈대중 좌표 추정
```python
problems = {
    "q01": (20, 300, 800, 600),   # 추정
    "q02": (20, 600, 800, 900),   # 추정
}
```
**결과:** 전부 틀림

### 2차: 구간별 테스트 크롭
```python
# 150px 단위로 잘라서 확인
for y in range(0, 2000, 150):
    crop(20, y, 800, y+150)
    # → 직접 눈으로 확인
```
**결과:** 수동으로 하면 가능하지만 자동화 불가

### 3차: Vision AI 좌표 요청
```
"각 문제의 bounding box를 (x1, y1, x2, y2)로 알려줘"
```
**결과:** 부정확한 좌표 반환

---

## ✅ 현실적인 대안

### 1. 페이지 단위 저장 (현재 채택)
```
문제별 분리 포기 → 페이지 전체 이미지로 저장
Claude가 "6페이지 3번" 물어보면 페이지 이미지 보여주기
```
- 장점: 간단, 즉시 구현 가능
- 단점: 개별 문제 추적 안 됨

### 2. OCR + 규칙 기반 (향후)
```
Tesseract로 텍스트 추출 
→ "1", "2", "3" 문제번호 위치 찾기 
→ 그 아래로 크롭
```
- 장점: 정확함
- 단점: 추가 개발 필요

### 3. 수동 좌표 템플릿
```
"개념유형 POWER 중2-1"은 항상 같은 레이아웃
→ 한 번 좌표 잡아두면 전체 적용
```
- 장점: 같은 교재는 재사용
- 단점: 교재마다 템플릿 필요

---

## 📝 결론

**Phase 3 현재:**
- 페이지 단위 분석으로 진행
- Claude API로 문제 내용/난이도/개념 분석

**Phase 4 이후:**
- OCR 기반 문제 영역 자동 탐지 고려
- 교재별 레이아웃 템플릿 시스템
